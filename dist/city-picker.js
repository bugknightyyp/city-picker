/*! nav-aim- v1.2.0 - 2013-09-20 */define("city-picker/1.2.0/city-picker.css",[],function(){seajs.importStyle(".o_pick{width:334px;overflow:hidden;border-width:1px;border-style:solid;position:absolute;background-color:#FFF;border-radius:0 5px 5px 0}.o_pick ul{list-style:none}.o_pick ul li{list-style:none}.o_pick .o_pick_h{height:24px;line-height:24px;color:#999}.o_pick .o_pick_tab{padding:0 5px 23px;border-bottom-width:1px;border-bottom-style:solid}.o_pick .o_pick_tab li{float:left;display:inline;padding:0 5px;margin-right:2px;height:22px;line-height:22px;border-width:1px;border-style:solid;border-radius:3px 3px 0 0;cursor:pointer}.o_pick .o_pick_tab li.on{background-color:#fff;border-bottom:1px solid #fff;cursor:auto}.o_pick .o_pick_list{overflow:hidden;padding:5px}.o_pick .o_pick_list .o_pick_item{width:100%}.o_pick .o_pick_list .o_pick_item strong{display:block;clear:both;height:20px;line-height:20px}.o_pick .o_pick_list .o_pick_item span{float:left;width:54px;width:16.66666666666%;white-space:nowrap;word-break:keep-all;overflow:hidden;height:20px;line-height:20px;cursor:pointer}.o_pick_skin_1{border-color:#fc0}.o_pick_skin_1 .o_pick_tab{border-color:#fc0}.o_pick_skin_1 .o_pick_tab li{border-color:#fc0;background-color:#FFF6C8}.o_pick_skin_2{border-color:#6eaeeb}.o_pick_skin_2 .o_pick_tab{border-color:#6eaeeb}.o_pick_skin_2 .o_pick_tab li{border-color:#6eaeeb;background-color:#a7d8fe}.s_pick{width:250px;border:1px solid #fc0;position:absolute;background-color:#FFF;overflow:hidden}.s_pick .s_pick_h{height:24px;line-height:24px;padding:0 5px;white-space:nowrap;word-break:keep-all}.s_pick .s_pick_r{width:100%}.s_pick .s_pick_r li{list-style:none;width:100%;overflow:hidden;height:24px;line-height:24px}.s_pick .s_pick_r li.on{background-color:#F5F5F5;cursor:auto}.s_pick .s_pick_r .s_pick_city{width:45%;float:left;padding-left:5px}.s_pick .s_pick_r .s_pick_city i{color:#f60}.s_pick .s_pick_r .s_pick_char{width:45%;float:right;text-align:right;padding-right:5px}.s_pick .s_pick_r .s_pick_char i{color:#f60}.s_pick .s_pick_pager{height:24px;line-height:24px;text-align:center;border-top:1px dashed #ccc}.s_pick .s_pick_pager span{padding:5px;cursor:pointer}.s_pick .s_pick_pager span.on{font-size:14px;font-weight:700}.s_pick .s_pick_pager em{font-family:Arial;vertical-align:top}.s_pick_skin_1{border-color:#fc0}.s_pick_skin_1 .s_pick_h{background-color:#FFF5C8}.s_pick_skin_2{border-color:#6eaeeb}.s_pick_skin_2 .s_pick_h{background-color:#a7d8fe}")}),define("city-picker/1.2.0/city-picker",["jquery","../css/city-picker.css","./offer.js","./search.js"],function(e,i,t){var r=e("jquery");e("../css/city-picker.css");var n=e("./offer"),s=e("./search"),c=function(e){var i=r.extend({txt:null,blur_callback:null,item_mdcb:null,source:[],skin:1,offer_w:334,offer_atom_w:16.66666666},e||{}),t=null,c=null,o="",p=!0,a=function(e,i){var t=r(e).offset(),n=r(e).outerHeight();return r(i).css({left:t.left,top:t.top+n-1}),r(i)},l=[function(){p=!1,-[1]&&i.txt.blur()}],_=[i.item_mdcb,function(){p=!0,o=r.trim(i.txt.val()),-[1]&&i.txt.blur()}];i.txt.focus(function(){i.txt[0].select(),t?(!c||c.wrap.is(":hidden"))&&(t.wrap.show(),a(i.txt,t.wrap)):(t=new n({skin:i.skin,hot:i.hot,source:i.source,offer_w:i.offer_w,offer_atom_w:i.offer_atom_w,wrap_mdcb:l,item_mdcb:_}),r("body").append(a(i.txt,t.wrap)))}).blur(function(){p?(t.wrap&&t.wrap.hide(),c&&c.wrap.hide(),i.blur_callback&&"function"==typeof i.blur_callback&&i.blur_callback.call(this,this)):function(e){setTimeout(function(){p=!0,r(e).trigger("focus")},0)}(this)}).keyup(function(e){var n=r.trim(i.txt.val()).replace(/[\\\/\*\.\?]/g,"");if(o!=n){if(o=n,""==n)return t.wrap.show(),c&&c.wrap.hide(),void 0;t&&t.wrap.is(":visible")&&t.wrap.hide(),c?(c.search(n),c.render(),a(i.txt,c.wrap).show()):(c=new s({skin:i.skin,source:i.source,wrap_mdcb:l,item_mdcb:_}),c.search(n).render(),r("body").append(a(i.txt,c.wrap)))}else switch(e.which){case 37:c.render(c.get_on_page()-1);break;case 39:c.render(c.get_on_page()+1);break;case 13:c.enter_select(),-[1]||i.txt.blur()}}).keydown(function(e){if(c&&c.wrap.is(":visible"))switch(e.which){case 38:case 40:c.move_select(e.which)}})};t.exports=c}),define("city-picker/1.2.0/offer",["jquery"],function(e,i,t){var r=e("jquery"),n=function(e){var i=r.extend({skin:1,wrap_mdcb:[],item_mdcb:[],source:[]},e||{}),t=r('<div class="o_pick  o_pick_skin_'+i.skin+'"style="width:'+i.offer_w+'px">'+'		 <div class="o_pick_h">拼音支持首字母输入，或 ← ↑ ↓ → 选择</div>'+'		 <div class="o_pick_tab">'+"			 <ul></ul>"+"		 </div>"+'		 <div class="o_pick_list">'+"		 </div>"+"	</div>"),n=(t.children(".o_pick_h"),r(".o_pick_tab ul",t)),s=t.children(".o_pick_list"),c=function(e){return'<span code="'+e[2]+'"title="'+e[0]+'" style="width:'+i.offer_atom_w+'%;">'+e[0]+"</span>"},o=function(e,i,t){for(var r,o=j=0,p={},a=str="";t.length>o;o++)r=t[o][1].substr(0,1),p[r]===void 0&&(p[r]=""),p[r]=p[r]+c(t[o]);for(o=0;i.length>o;o++){for(;i[o].length>j;j++)r=i[o].substr(j,1),p[r]!==void 0&&(a+=r,str+="<strong>"+r+"</strong>",str+=p[r]);""!=str&&(n.append("<li>"+a+"</li>"),s.append('<div class="o_pick_item" name="'+a+'"  style="display:'+(0==e&&0==o?"block":"none")+';">'+str+"</div>")),j=0,a=str=""}},p=function(e,i){for(var t=0,r="";i.cities.length>t;t++)r+=c(i.cities[t]);n.append('<li class="'+(0==e?"on":"")+'">'+i.label+"</li>"),s.append('<div class="o_pick_item" style="display:'+(0==e?"block":"none")+'">'+r+"</div>")},a=function(e){r.each(e,function(e,i){switch(Object.prototype.toString.call(i.label).replace(/\[.+?\s+(.+)\]/,"$1")){case"String":p(e,i);break;case"Array":o(e,i.label,i.cities);break;default:}})};a(e.source),n.children().mousedown(function(){if(!r(this).hasClass("on")){r(this).addClass("on").siblings(".on").removeClass("on");var e=s.children().eq(r(this).index());e[0].style.display="block",e.siblings().hide()}}),t.mousedown(function(){var e=this;return i.wrap_mdcb.length>0&&r.each(i.wrap_mdcb,function(i,t){t.call(e,e)}),!1}),r(".o_pick_item > span",s).mousedown(function(){var e=this;return i.item_mdcb.length>0&&r.each(i.item_mdcb,function(i,t){t&&"function"==typeof t&&t.call(e,e)}),!1}),this.wrap=t};t.exports=n}),define("city-picker/1.2.0/search",["jquery"],function(e,i,t){var r=e("jquery"),n=function(e){var i=r.extend({skin:1,wrap_mdcb:[],item_mdcb:[],source:[],pager_entries:3,per_pager_num:10,pager_num_edgs:1},e||{}),t=1,n=[],s="",c=null,o=r('<div class="s_pick   s_pick_skin_'+i.skin+'">'+'	 <div class="s_pick_h">abc,按拼音排序</div>'+'	 <ul class="s_pick_r">'+"	 </ul>"+'	 <div class="s_pick_pager">'+'		 <span>&lt;&lt;</span><span>1</span><span class="on">2</span><span>4</span><span>&gt;&gt;</span>'+"	 </div>"+"</div>"),p=o.children(".s_pick_h"),a=o.children(".s_pick_r"),l=o.children(".s_pick_pager"),_=function(e,t){var r=Math.floor(i.pager_entries/2),n=Math.ceil(t/i.per_pager_num),s=n-i.pager_entries,c=e>r?Math.max(Math.min(e-r,s),1):1,o=e>r?Math.min(e+r,n):Math.min(i.pager_entries,n);return{start:c,end:o,num_page:n}},d=function(e){for(var i=0,t="^",r="";e.length>i;i++)t+="("+e.substr(i,1)+")(.*?)",r+="<i>$"+(2*(i+1)-1)+"</i>$"+2*(i+1);return{patt:RegExp(t,"i"),rep:r}},h=function(e,o){var p=0,a="";for(o=o||i.source,record=[],result=[],c=d(e),r.each(o,function(i,t){(!t.label||t.isSearch!==void 0&&t.isSearch)&&"Array"==Object.prototype.toString.call(t.cities).replace(/\[.+?\s+(.+)\]/,"$1")&&r.each(t.cities,function(i,t){r.each(t,function(i,r){if(/[A-Za-z]+/.test(e)){if(c.patt.test(r))return record=t.concat(),record.push(i),result.push(record),!1}else if(c.patt.test(r))return record=t.concat(),record.push(i),result.push(record),!1})})}),t=1,s=e,result.sort(function(e,i){var e=e[e[e.length-1]],i=i[i[i.length-1]],t=[e,i].sort();return t[0]==e?-1:1}),p=0;result.length>p;p++)a==result[p][0]?(result.splice(p,1),p--):a=result[p][0];return n=result,this},u=function(e){var i=0,t="",r=0;for(temp={};e.length>i;i++)r=e[i].slice(-1),"0"==r?(temp.hanzi=e[i][0].replace(c.patt,c.rep),temp.zimu=e[i][1]):(temp.hanzi=e[i][0],temp.zimu=e[i][r].replace(c.patt,c.rep)),t+='<li title="'+e[i][0]+'" code="'+e[i][2]+'"'+(0==i?'class="on"':"")+">"+'<span class="s_pick_city">'+temp.hanzi+'</span><span class="s_pick_char">'+temp.zimu+"</span></li>";a.html(t)},k=function(e,t){var r=_(e,t),n="",s=0;for(e>1&&(n+="<span>&lt;&lt;</span>"),i.pager_num_edgs<r.start&&(n+="<span>1</span>"),r.start-i.pager_num_edgs>1&&(n+="<em>...</em>"),s=r.start;r.end>=s;s++)n+=s==e?'<span class="on">'+s+"</span>":"<span>"+s+"</span>";r.num_page-r.end>1&&(n+="<em>...</em>"),r.num_page>r.end&&(n+="<span>"+r.num_page+"</span>"),r.num_page>e&&(n+="<span>&gt;&gt;</span>"),l.html(n)},f=function(e,r){var c,r=r||n,o=Math.ceil(r.length/i.per_pager_num),e=e||t;if(!(1>e||e>o&&0!=o))return e!=t&&(t=e),c=i.per_pager_num*(e-1),0==r.length?(p.html('对不起，找不到<strong style="padding:0 5px;">'+s+"</strong>相关信息"),l.hide()):(p.html(s+'，<span style="color:#777777;">按拼音排序</span>'),l.show()),u(r.slice(c,c+i.per_pager_num)),k(e,r.length),g(),b(),m(),this},g=function(){o.mousedown(function(){var e=this;return i.wrap_mdcb.length>0&&r.each(i.wrap_mdcb,function(i,t){t.call(e,e)}),!1})},b=function(){a.children().mousedown(function(){var e=this;return i.item_mdcb.length>0&&r.each(i.item_mdcb,function(i,t){t&&"function"==typeof t&&t.call(e,e)}),!1}).mouseover(function(){r(this).addClass("on").siblings(".on").removeClass("on")})},m=function(){l.children().mousedown(function(){return r(this).hasClass("on")||"em"==r(this).attr("tagName")?void 0:(/\d/.test(r(this).html())?t=parseInt(r(this).html()):0==r(this).index()?--t:++t,f(),!1)})};this.get_on_page=function(){return t},this.enter_select=function(){a.children(".on").trigger("mousedown")},this.move_select=function(e){var i=a.children();switch(index=i.filter(".on").index(),e){case 38:--index;break;case 40:++index}0>index&&(index=i.length-1),index>=i.length&&(index=0),i.eq(index).addClass("on").siblings(".on").removeClass("on")},this.wrap=o,this.search=h,this.render=f};t.exports=n});